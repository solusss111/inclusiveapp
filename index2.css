/* ========== GLOBAL STYLES ========== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: url('assets/background.jpg') no-repeat center center fixed;
  background-size: cover;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
  color: #333;
}

/* Glassmorphism: Remove solid white backgrounds */
.header,
.task-box,
.card,
.modal-content,
.character,
.radial-item,
.image-card {
  background: rgba(255, 255, 255, 0.25);
  /* More transparent */
  backdrop-filter: blur(10px);
  /* Blur effect */
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
}

.header {
  display: none;
  /* Hidden by default */
  padding: 20px;
  text-align: center;
  position: sticky;
  top: 0;
  z-index: 100;
  border-radius: 0 0 20px 20px;
  margin-bottom: 20px;
}

.header h1 {
  font-size: 32px;
  color: white;
  margin: 0;
  text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
}

.header p {
  color: white;
  margin-top: 5px;
  font-weight: 500;
}

/* Coins Display */
.coins-display {
  position: fixed;
  top: 150px;
  right: 20px;
  background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
  padding: 10px 25px;
  border-radius: 50px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  font-size: 24px;
  font-weight: bold;
  color: #fff;
  z-index: 99;
}

.container {
  flex: 1;
  padding: 20px;
  max-width: 1300px;
  margin: 0 auto;
  width: 100%;
}

/* Screen Visibility */
.screen {
  display: none;
  animation: fadeIn 0.5s ease-out;
}

.screen.active {
  display: block;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========== RADIAL MENU (MAIN MENU) ========== */
.radial-menu-container {
  position: relative;
  width: 500px;
  height: 500px;
  margin: 40px auto;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Central Main Button */
.radial-center-btn {
  width: 220px;
  height: 220px;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
  z-index: 20;
  box-shadow: 0 0 40px rgba(102, 126, 234, 0.5);
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  border: 4px solid rgba(255, 255, 255, 0.3);
}

.radial-center-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 60px rgba(102, 126, 234, 0.8);
}

/* Surrounding Items */
.radial-item {
  position: absolute;
  width: 140px;
  height: 140px;
  border-radius: 20px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  opacity: 0;
  transform: translate(0, 0) scale(0);
  /* Start hidden at center */
  z-index: 10;
  pointer-events: none;
}

/* Active State: Items fly out */
.radial-menu-container.active .radial-item {
  opacity: 1;
  pointer-events: auto;
  /* Transform is set via inline styles in HTML/JS using CSS variables */
  transform: translate(calc(var(--dist) * cos(var(--angle))),
      calc(var(--dist) * sin(var(--angle)))) scale(1);
}

.radial-item:hover {
  transform: translate(calc(var(--dist) * cos(var(--angle))),
      calc(var(--dist) * sin(var(--angle)))) scale(1.15) !important;
  background: rgba(255, 255, 255, 0.9);
  z-index: 30;
}

.radial-item h3 {
  font-size: 32px;
  color: white;
  margin: 0;
}

.radial-item p {
  font-size: 14px;
  color: #4a5568;
  margin-top: 5px;
}

/* ========== VOICE TASK (BUBBLE INTERFACE) ========== */
.voice-bubble-container {
  position: relative;
  width: 500px;
  height: 500px;
  margin: 20px auto;
  border-radius: 50%;
}

.voice-center-bubble {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 180px;
  height: 180px;
  border-radius: 50%;
  background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
  color: #fff;
  /* White text for contrast */
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  z-index: 20;
  box-shadow: 0 0 30px rgba(255, 154, 158, 0.6);
  transition: all 0.4s ease;
  border: 4px solid rgba(255, 255, 255, 0.4);
}

.voice-center-bubble:active {
  transform: translate(-50%, -50%) scale(0.95);
}

.small-bubble {
  position: absolute;
  width: 70px;
  height: 70px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.9);
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 28px;
  font-weight: bold;
  color: #667eea;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  opacity: 0;
  z-index: 10;
}

/* Bubbles expansion is handled by JS setting left/top */
.voice-bubble-container.expanded .small-bubble {
  opacity: 1;
}

.small-bubble:hover {
  transform: translate(-50%, -50%) scale(1.2);
  background: #fff;
  z-index: 15;
}

/* ========== GENERAL UI ELEMENTS ========== */
.btn {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  padding: 15px 30px;
  border-radius: 50px;
  cursor: pointer;
  margin: 10px;
  font-size: 18px;
  font-weight: bold;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
  transition: all 0.3s;
}

.btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
}

.btn-secondary {
  background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
  color: #fff;
}

.btn-success {
  background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
  color: #2d3748;
}

.task-box {
  padding: 40px;
  margin: 30px auto;
  max-width: 900px;
  border-radius: 20px;
}

.task-box h2 {
  color: #5a67d8;
  margin-bottom: 20px;
  font-size: 32px;
  text-align: center;
}

.instruction {
  font-size: 20px;
  color: #4a5568;
  text-align: center;
  line-height: 1.6;
}

.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 25px;
  margin: 30px 0;
}

.card {
  padding: 30px;
  text-align: center;
  cursor: pointer;
  border-radius: 20px;
  transition: transform 0.3s;
}

.card:hover {
  transform: translateY(-10px);
}

.card-icon {
  font-size: 60px;
  margin-bottom: 15px;
}

.images-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 20px;
  margin: 30px 0;
}

.image-card {
  padding: 20px;
  text-align: center;
  cursor: pointer;
  border-radius: 15px;
  transition: transform 0.3s;
}

.image-card:hover {
  transform: scale(1.05);
}

.image-card .emoji {
  font-size: 48px;
  margin-bottom: 10px;
}

.feedback {
  text-align: center;
  font-size: 24px;
  margin: 20px 0;
  font-weight: bold;
  min-height: 40px;
}

.feedback.success {
  color: #38a169;
}

.feedback.error {
  color: #e53e3e;
}

/* Modal */
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  z-index: 1000;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(5px);
}

.modal.active {
  display: flex;
}

.modal-content {
  color: white;
  padding: 40px;
  border-radius: 20px;
  text-align: center;
  max-width: 400px;
}

/* Responsive */
@media (max-width: 768px) {

  .radial-menu-container,
  .voice-bubble-container {
    width: 320px;
    height: 320px;
  }

  .radial-center-btn,
  .voice-center-bubble {
    width: 140px;
    height: 140px;
    font-size: 20px;
  }

  .radial-item {
    width: 80px;
    height: 80px;
  }

  .radial-item h3 {
    font-size: 20px;
  }

  .small-bubble {
    width: 50px;
    height: 50px;
    font-size: 20px;
  }
}

.header {
  display: none;
}

body.show-header .header {
  display: block;
}


/* Letter Circle Interface */
.letter-circle-container {
  position: relative;
  width: 500px;
  height: 500px;
  margin: 40px auto;
  display: flex;
  justify-content: center;
  align-items: center;
}

.center-circle {
  position: absolute;
  width: 180px;
  height: 180px;
  border-radius: 50%;
  background: linear-gradient(135deg, #FDB813 0%, #F5A623 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: bold;
  color: white;
  cursor: pointer;
  box-shadow: 0 8px 25px rgba(253, 184, 19, 0.4);
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  z-index: 20;
}

.center-circle>* {
  pointer-events: none;
}

.center-circle:hover {
  transform: scale(1.1);
  box-shadow: 0 12px 35px rgba(253, 184, 19, 0.6);
}

.center-circle.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.center-circle.highlight {
  animation: pulse-center 1s infinite;
}

@keyframes pulse-center {

  0%,
  100% {
    box-shadow: 0 8px 25px rgba(253, 184, 19, 0.4);
  }

  50% {
    box-shadow: 0 8px 35px rgba(253, 184, 19, 0.8);
  }
}

.option-circle {
  position: absolute;
  width: 100px;
  height: 100px;
  border-radius: 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  backdrop-filter: blur(10px);
  border: 3px solid rgba(255, 255, 255, 0.3);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  font-weight: bold;
  color: white;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
  transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  opacity: 0;
  transform: translate(0, 0) scale(0);
  z-index: 10;
  pointer-events: none;
}

/* Ensure child elements don't intercept clicks */
.option-circle>* {
  pointer-events: none;
}

.letter-circle-container.active .option-circle {
  opacity: 1;
  pointer-events: auto;
  transform: translate(calc(var(--dist) * cos(var(--angle))),
      calc(var(--dist) * sin(var(--angle)))) scale(1);
}

.option-circle:hover {
  transform: translate(calc(var(--dist) * cos(var(--angle))),
      calc(var(--dist) * sin(var(--angle)))) scale(1.15);
  background: linear-gradient(135deg, #7B8FF0 0%, #8B5FC8 100%);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
}

.option-circle.selected {
  background: linear-gradient(135deg, #FDB813 0%, #F5A623 100%);
  color: white;
  box-shadow: 0 6px 25px rgba(253, 184, 19, 0.6);
  transform: translate(calc(var(--dist) * cos(var(--angle))),
      calc(var(--dist) * sin(var(--angle)))) scale(1.1);
}

.option-circle.disabled {
  opacity: 0.4;
  cursor: not-allowed;
  pointer-events: none;
}

/* Override Radial Item styles for cleaner look (User Request) */
.radial-item {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  backdrop-filter: none !important;
}

.radial-item div {
  font-size: 50px;
  margin-bottom: 5px;
  text-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
  transition: transform 0.3s;
}

.radial-item p {
  font-size: 18px;
  color: white;
  font-weight: bold;
  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);
  background: rgba(0, 0, 0, 0.3);
  /* Slight background for text readability */
  padding: 4px 10px;
  border-radius: 10px;
}

.radial-item:hover {
  /* Keep existing transform logic but add scale */
  transform: translate(calc(var(--dist) * cos(var(--angle))), calc(var(--dist) * sin(var(--angle)))) scale(1.25) !important;
  background: rgba(255, 255, 255, 0.15) !important;
  /* Subtle highlight */
  box-shadow: 0 0 30px rgba(255, 255, 255, 0.5) !important;
  border-radius: 30px;
}

.radial-item:hover div {
  transform: scale(1.1);
}

/* SUN RAYS ANIMATION */
.radial-item::before {
  content: '';
  position: absolute;
  top: 50%;
  left: auto;
  right: 0;
  /* Anchor at the Center-side of the rotated box */
  width: calc(var(--dist) - 60px);
  /* Stop short of the icon */
  height: 12px;
  /* Thickness of ray */
  background: linear-gradient(90deg, #FFD700 0%, #FFA500 100%);

  /* Triangle Shape: Narrow at item (Left), Wide at Center (Right) */
  /* Since we anchor right, Left is 0% (Item side), Right is 100% (Center side) */
  /* We want narrow at Item. */
  clip-path: polygon(0 40%, 100% 0, 100% 100%, 0 60%);

  transform-origin: right center;
  /* Grow from Center */
  transform: rotate(calc(var(--angle) + 180deg)) translate(50%, 0) scaleX(0);

  /* Note: Translate might be needed to align center? 
     Wait, transform origin 'right center' is the right edge of the pseudo element.
     The pseudo element is inside .radial-item.
     .radial-item is translated to (x, y).
     We want the right edge of ::before to be at (0,0) of Parent Container.
     But ::before is inside Item.
     So we need to shift it BACK by 'dist'.
     
     Actually, simpler: 
     Place ::before at the PARENT CONTAINER CENTER using fixed positioning relative to container?
     No, container has many items.
     
     Back to relative to Item:
     Item is at (dist, 0) (rotated).
     We want Ray to end at (0,0).
     Ray width is 'dist'.
     If we place right edge of Ray at right edge of Item? No.
     If Ray is centered in Item, and we transmit it back?
     
     Let's try:
     left: 50%; top: 50%;
     width: var(--dist);
     transform-origin: right center;
     transform: rotate(...) translate(???)
     
     If I rotate 180deg, it points towards center.
     If I use margin-right to pull it?
     
     Hypothesis:
     anchored 'right' on .radial-item means right side of item box.
     Item box is 140px wide. Center is 70px.
     We want the 'Right' of the Ray to be at 'dist' distance from Item Center.
     
     Let's just use EXACT positioning:
     width: var(--dist);
     left: 50%; top: 50%;
     transform-origin: right center;
     transform: rotate(calc(var(--angle) + 180deg)) translate(50%, 0); 
     
     Wait, translate(50%, 0) relative to ITSELF (Ray)?
     Ray width is 'dist'. 50% is dist/2.
     
     Correct logic:
     Start at Item Center (left:50%, top:50%).
     Rotate to point to Container Center.
     Shift Ray so its 'Right' tip touches Container Center?
     Or 'Left' tip touches Item Center?
     If 'Left' tip touches Item Center:
        transform-origin: left center.
        rotate(180deg).
        This makes it point to Container Center.
        scaleX(0) -> 1.
        At scale 1, it reaches Container Center.
        This grows FROM Item TO Center.
        User wants logical shrink/grow.
        Expanding menu: Items move OUT. Rays should grow OUT from Window Center.
        So origin must be Window Center.
        Window Center is at the 'end' of the ray (Right side).
        So transform-origin: right center.
        But we need to Position the Right side at the Item Center + Offset to reach Window Center.
        Distance is 'dist'.
        If 'left' is at Item Center. Ray goes Left (towards window center).
        Right side of Ray is at Item Center.
        So: transform-origin: right center.
        scaleX from 0 to 1.
        This grows from Item Center towards Window Center? No.
        Right center is Item Center.
        Left is Window Center.
        If we scaleX, it grows to the Left (Window Center).
        This is backwards. We want it to grow FROM Window Center (Left tip) TO Item (Right tip).
        
        So we need Ray to be positioned such that its 'Start' (anchor) is at Window Center.
        And its 'End' extends to Item.
        And we scale from Start.
         Start is at Window Center.
         End is at Item.
         Relative to Item (where we are), Window Center is at (-dist, 0) (rotated).
         So we position the element at (-dist, 0).
         width: dist.
         transform-origin: left center (Window Center).
         scaleX(0 -> 1).
         
         Implementation:
         left: calc(50% - var(--dist));
         top: 50%;
         width: var(--dist);
         transform-origin: left center;
         transform: rotate(var(--angle)) scaleX(0); // Angle points to Item!
         
         Wait, if we use var(--angle), 0deg is Right.
         If Item is at 0deg. Item is at (dist, 0).
         Window Center is at (-dist, 0) relative to Item? No. Item is at (dist, 0) relative to Center.
         So Center is at (-dist, 0) relative to Item.
         So position at left: calc(50% - var(--dist)) places the Left edge of Ray at Window Center.
         width: var(--dist).
         Right edge touches Item.
         transform-origin: left center (Window Center).
         scaleX(0 -> 1).
         Grows from Center to Item.
         Perfect!
         
         Angle:
         If Item is at 0deg. Center is Left.
         We want Ray pointing Right (0deg) from Center.
         So rotate(var(--angle)).
         
         Clip Path:
         Wide at Left (Center), Narrow at Right (Item).
         polygon(0 0, 100% 45%, 100% 55%, 0 100%)
         Left side (0): 0 to 100% height (Wide).
         Right side (100%): 45% to 55% height (Narrow).
  
  Final CSS:
*/
  .radial-item::before {
    content: '';
    position: absolute;
    top: 50%;
    left: calc(50% - var(--dist));
    width: calc(var(--dist) - 60px);
    /* Stop short */
    /* Shift left to account for stop short? */
    /* If width is reduced, and we want it to start at center: */
    /* left: calc(50% - var(--dist)); is correct start (Center). */
    /* It extends 'width' pixels. So it stops 60px short of Item Center. */

    height: 16px;
    background: linear-gradient(90deg, #FFD700 0%, #FFA500 100%);
    transform-origin: left center;
    transform: rotate(var(--angle)) scaleX(0);
    margin-top: -8px;
    z-index: -1;
    transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    clip-path: polygon(0 0, 100% 45%, 100% 55%, 0 100%);
    opacity: 0.8;
  }

  .radial-menu-container.active .radial-item::before {
    transform: rotate(var(--angle)) scaleX(1);
  }
}

/* --- FROG GAME STYLES --- */
.frog-controls {
  margin-bottom: 60px;
  display: flex;
  justify-content: center;
  z-index: 100;
  position: sticky;
  top: 20px;
}

#frogActionBtn {
  padding: 15px 40px;
  font-size: 22px;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  color: white;
  font-weight: bold;
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  transition: transform 0.1s;
  background-color: #d84315;
  border: 4px solid #fff;
  min-width: 250px;
}

#frogActionBtn:active {
  transform: scale(0.95);
}

#frogActionBtn:disabled {
  background-color: #ccc;
  cursor: not-allowed;
}

#frogActionBtn.next-mode {
  background-color: #43a047;
}

#frogResetBtn {
  padding: 15px 30px;
  font-size: 20px;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  color: white;
  font-weight: bold;
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  transition: transform 0.1s;
  background-color: #ff7043;
  border: 4px solid #fff;
  min-width: 150px;
}

#frogResetBtn:active {
  transform: scale(0.95);
}

#frogResetBtn:hover {
  background-color: #f4511e;
}

.frog-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 50px;
  justify-content: center;
  max-width: 1000px;
  padding-bottom: 150px;
  margin-top: 20px;
}

.frog-card {
  background: white;
  padding: 25px 30px;
  border-radius: 15px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: flex-end;
  min-width: 120px;
  height: 100px;
  border-bottom: 5px solid #80cbc4;
  transition: transform 0.3s;
}

.frog-card.active-word {
  transform: scale(1.05);
  /* Collision with .card? No, we use .frog-card */
  border-bottom-color: #d84315;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
}

.frog-syllable {
  font-size: 50px;
  font-weight: bold;
  line-height: 1;
  position: relative;
  z-index: 2;
  padding: 0 2px;
  display: flex;
  justify-content: center;
}

.frog-separator {
  font-size: 50px;
  color: #ddd;
  margin: 0 5px;
  z-index: 2;
}

.frog-vowel {
  color: #d32f2f;
}

.frog-consonant {
  color: #1976d2;
}

#frog-character {
  position: absolute;
  width: 60px;
  height: 60px;
  z-index: 9999;
  top: 0;
  left: 0;
  pointer-events: none;
  transition: opacity 0.3s;
  display: none;
}

#frog-character.visible {
  display: block;
}

.frog-shadow {
  filter: drop-shadow(0 10px 5px rgba(0, 0, 0, 0.3));
}

.frog-syllable-drop {
  position: absolute;
  top: -25px;
  width: 20px;
  height: 20px;
  z-index: 3;
  opacity: 0;
  transform: scale(0) translateY(10px);
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.frog-syllable-drop.visible {
  opacity: 1;
  transform: scale(1) translateY(0);
}