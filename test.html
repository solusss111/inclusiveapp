<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>–û–∑–≤—É—á–∫–∞ —Ç–µ–∫—Å—Ç–∞ (–ö–∞–∑–∞—Ö—Å–∫–∏–π)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

    <h3>–¢–µ–∫—Å—Ç –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º:</h3>
    <textarea id="textToRead" rows="4" cols="50">–°”ô–ª–µ–º, –º–µ–Ω JavaScript-—Ç—ñ “Ø–π—Ä–µ–Ω—ñ–ø –∂–∞—Ç—ã—Ä–º—ã–Ω.</textarea>
    <br><br>
    <button id="btn">üîä –û–∑–≤—É—á–∏—Ç—å</button>

    <script>
        function speakKazakh() {
            // 1. –ë–µ—Ä–µ–º —Ç–µ–∫—Å—Ç –ø—Ä—è–º–æ –∏–∑ –ø–æ–ª—è –≤–≤–æ–¥–∞
            const text = document.getElementById('textToRead').value;

            if (!text.trim()) {
                alert("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç!");
                return;
            }

            // 2. –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –æ–∑–≤—É—á–∫–∏
            const u = new SpeechSynthesisUtterance(text);
            u.lang = 'kk-KZ'; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —è–∑—ã–∫
            u.rate = 0.9;     // –°–∫–æ—Ä–æ—Å—Ç—å
            u.pitch = 1.0;    // –¢–æ–Ω

            // 3. –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –∏–º–µ–Ω–Ω–æ –∫–∞–∑–∞—Ö—Å–∫–∏–π –≥–æ–ª–æ—Å
            const voices = window.speechSynthesis.getVoices();
            // –ò—â–µ–º –≥–æ–ª–æ—Å, –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∏–ª–∏ —è–∑—ã–∫–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å 'kk' –∏–ª–∏ 'kazakh'
            const kkVoice = voices.find(v => v.lang.includes('kk') || v.lang.includes('KZ'));

            if (kkVoice) {
                u.voice = kkVoice;
                console.log("–ù–∞–π–¥–µ–Ω –≥–æ–ª–æ—Å:", kkVoice.name);
            } else {
                console.warn("–ö–∞–∑–∞—Ö—Å–∫–∏–π –≥–æ–ª–æ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π.");
            }

            // 4. –ó–∞–ø—É—Å–∫–∞–µ–º
            window.speechSynthesis.cancel(); // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —É–∂–µ –≥–æ–≤–æ—Ä–∏—Ç—Å—è
            window.speechSynthesis.speak(u);
        }

        // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∫ –∫–Ω–æ–ø–∫–µ
        document.getElementById('btn').addEventListener('click', speakKazakh);

        // –í–ê–ñ–ù–û: –ó–∞–≥—Ä—É–∑–∫–∞ –≥–æ–ª–æ—Å–æ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
        // –≠—Ç–æ—Ç –∫–æ–¥ –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –±—Ä–∞—É–∑–µ—Ä —É—Å–ø–µ–ª –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≥–æ–ª–æ—Å–æ–≤ –¥–æ –∫–ª–∏–∫–∞.
        window.speechSynthesis.onvoiceschanged = () => {
            window.speechSynthesis.getVoices();
        };
    </script>

</body>

</html>